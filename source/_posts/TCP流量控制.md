---
title: TCP流量控制
date: 2020-04-06 22:01:47
categories: 
- 理论归纳
tags:
- 计算机网络
---

# TCP流量控制

## 流量控制

### 流量控制目的

- 发送方的发送速率与接收方的接收速率尽可能一至
- 数据传输尽可能快
- 不要使网络发生拥塞

### 实现方式

#### 滑动窗口机制

在建立TCP链接时，数据接收方会通知发送方其接收窗口（rwnd）大小，而发送方在收到接收窗口大小后会根据接收窗口与拥塞窗口（cwnd）大小设置发送窗口。

#### 滑动窗口的维护

- 在建立TCP链接时，数据接收方会通知发送方其接收窗口大小
- 接收端发送确认报文段时会一并发送当前剩余接收窗口大小
- 发送方收到确认报文段后选取MIN(rwnd,cwnd)作为发送窗口大小
- 当接收端接收窗口为0时发送方停止发送数据并启动持续计时器（presistencce timer）
- 接收端处理一部分数据后，将主动发送报文段通知发送端接收窗口的大小。
- 若接收方长时间未通知发送方接收窗口大小，或通知报文段丢失导致持续计时器超时，发送方将主动发出零窗口探测报文段
- 接收端在收到零窗口探测报文段时将回复当前接收窗口大小
- 若接收方收到的发送窗口大小依旧是0则重置持续计时器，若非0则继续发送数据。