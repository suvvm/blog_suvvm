---
title: 推荐系统的绩效衡量
date: 2021-01-30 15:24:21
categories: 
- 理论归纳
tags:
- 推荐系统
mathjax: true
---

# 推荐系统的绩效衡量

## 一、评测方法	

衡量推荐系统的有效性的方法主要分为三种

- 用户研究
- 在线估计（A/B测试）
- 离线评估

​	常用的度量方式为[方差度量](https://en.wikipedia.org/wiki/Mean_squared_error)和[均方根差度量](https://en.wikipedia.org/wiki/Root_mean_squared_error)

### 1、用户研究

​	用户研究是想数十个或数百个用户通过不同推荐策略创建推荐后由用户判断最佳的推荐策略，研究规模一般较小。

### 2、在线评估

​	将不同推荐策略作为推荐系统的两个变体，通过受测用户的反映来评估变体的有效性故称之为A/B测试。在线评估过程中通常对将变体直接部署至部分生产环境，将真实产品向成千上万用户展示。

### 3、离线评估

​	离线评估是基于历史数据的评估，通常是根据有现成结果的数据集来对推荐系统产出结果进行评估。可以基于一套数据集测试多种算法。

- 通过体制系统获得用户行为数据，生成标准数据集
- 见数据集按一定规则分为训练集和测试集
- 使用训练集上训练对应用户/项目模型，使用测试集进行预测
- 通过定义的离线指标评测推荐算法在测试集的预测结果

## 二、评测指标

- 预测准确度
- 信任度
- 用户满意度
- 实时性
- 覆盖率（不要只覆盖热门）
- 健壮性
- 多样性（适度提升不相似性）
- 商业目标（点击率、用户转化率）
- 惊喜度

### 1、准确度评测

- 评分预测

  - 通过对获取用户对目标产品的评分历史，建立兴趣模型，预测用户对推荐新物品的可能评分

  - 评分预测采用均方根差（RMSE 真实评分与预测评分的差的平方求和后处以预测的个数后开方）或平均绝对误差（MAE真实评分与预测评分的差的绝对值求和后处以预测的个数）计算
    $$
    RMSE=
    \sqrt{ 
    	\frac{
    		\sum_{i<T}^{u} (r_{ui} - \hat{r}_{ui})
    	}{|T|
    	}
    }
    \qquad
    MAE=
    \frac{
    	\sum_{i\in T}^{u}|r_{ui}-\hat{r}_{ui}|
    }{
    	|T|
    }
    $$

- Top-N推荐

  - 给用户一个大小为N的个性化推荐列表
  - Top-N准确率一般使用精确率（precision）和召回率（recall）来度量
    - 准确率（正确检索的元素数量与总数之比） $ A = \frac{TP + TN}{TP + FP + FN + TN} $
    - 精确率（正确检索的正类与被检索到的全部元素之比）$ P=\frac{TP}{TP+FP} $
    - 召回率（所有检索到的正类与全部正类的之比）$ R = \frac{TP}{TP+FP} $

|                           | 相关(Relevant)正类   | 无关(NonRelevant)负类  |
| ------------------------- | -------------------- | ---------------------- |
| 被检索到(Retrieved)       | TP（正确检索的正类） | FP（错误检索的负类）   |
| 未被检索到(Not Retrieved) | FN（错误检索的正类） | TN（正确家检索的负类） |

