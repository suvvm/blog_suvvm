---
title: JVM内存溢出与内存泄漏的处理
date: 2020-04-19 19:11:52
categories: 
- Java
tags:
- JVM
- 内存溢出
- 内存泄漏
---

# JVM内存溢出与内存泄漏的处理

## 已报OOM的内存溢出或内存泄漏

- 在运行时设置虚拟机参数 -XX:+HeapDumpOnOutOfMemoryError 创建堆内存存储快照
- 使用 -Xms分配合适的启动内存，使用-Xmx分配合适的最大内存
- 重新运行OOM的程序，生成.hprof堆快照文件
- 使用任意内存监视工具打开快照文件，根据堆内存占用结果进行分析
- 制定解决方案解决问题

## 未报OOM但存在内存泄漏风险和情况

- 使用可视化监控工具，如Jprofiler，或jdk自带的jconsole进行监控
- 根据监控结果判断是否存在泄漏点（如观察占用内存最多的对象类型、观察生命周期过长的对象）
- 制定解决方案解决问题