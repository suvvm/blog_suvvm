---
title: JVM内存模型
date: 2020-04-19 21:05:10
categories: 
- Java
tags:
- JVM
---

# JVM内存模型

![img](JVM内存模型\JvmMemory.svg)

## 线程共享

### 方法区

原永久代gc可以延申至方法区，存储运行时常量池和已被虚拟机加载的类的信息、常量、static变量

回收行为：常量池回收、对象类型的卸载

### 堆（最大内存区域）

- 堆用于存储对象实例
- 是垃圾搜集器管理的主要区域
- 分为新生代和老年代



## 线程独占

### Java栈

存放方法运行时所需数据（方法的动态内存模型）

每个方法执行都会创建一个栈帧，伴随方法从执行到结束，用于存储局部变量表、操作数栈、动态链接、方法出口等。

栈帧创建完毕后进栈，方法执行完毕后出栈。

- 局部变量表（空间在编译时就计算完毕）

  存放基本数据类型变量与对象变量引用

若栈内栈帧太多超出栈容量就会发生StackOverFlowError

### 本地方法栈

与上述Java栈相似，都有栈帧局部变量表等，但是本地方法栈为JVM所调用的Naitve方法服务。

### 程序计数器

程序计数器空间很小，指向当前线程执行的字节码指令的地址，若执行本地方法则为undefined，程序计数器没有OutOfMemoryError

(goto为Java保留字无法使用)